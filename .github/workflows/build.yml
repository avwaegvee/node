on: push

permissions:
    contents: write

jobs:
    build0:
        uses: ./.github/workflows/job.yml
    build1:
        needs: build0
        if: ${{!cancelled()}}
        uses: ./.github/workflows/job.yml
    build2:
        needs: build1
        if: ${{!cancelled()}}
        uses: ./.github/workflows/job.yml
    build3:
        needs: build2
        if: ${{!cancelled()}}
        uses: ./.github/workflows/job.yml
    build4:
        needs: build3
        if: ${{!cancelled()}}
        uses: ./.github/workflows/job.yml
    build5:
        needs: build4
        if: ${{!cancelled()}}
        uses: ./.github/workflows/job.yml
    build6:
        needs: build5
        if: ${{!cancelled()}}
        uses: ./.github/workflows/job.yml
    build7:
        needs: build6
        if: ${{!cancelled()}}
        uses: ./.github/workflows/job.yml
    build8:
        needs: build7
        if: ${{!cancelled()}}
        uses: ./.github/workflows/job.yml
    clean:
        runs-on: ubuntu-latest
        permissions:
            actions: write
        steps:
        - run: |
              sudo apt update
              sudo apt install -y --no-install-recommends python3-aiohttp
              curl https://bitbucket.org/chaowenguo/common/raw/main/clean.py | python3 - ${{secrets.GITHUB_TOKEN}}
